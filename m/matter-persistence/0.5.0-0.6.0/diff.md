# Comparing `tmp/matter_persistence-0.5.0-py3-none-any.whl.zip` & `tmp/matter_persistence-0.6.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 14930 bytes, number of entries: 26
+Zip file size: 15225 bytes, number of entries: 26
 -rw-r--r--  2.0 unx      134 b- defN 20-Feb-02 00:00 matter_persistence/__about__.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 matter_persistence/__init__.py
 -rw-r--r--  2.0 unx      191 b- defN 20-Feb-02 00:00 matter_persistence/exceptions.py
 -rw-r--r--  2.0 unx      332 b- defN 20-Feb-02 00:00 matter_persistence/cache/__init__.py
 -rw-r--r--  2.0 unx     1349 b- defN 20-Feb-02 00:00 matter_persistence/cache/client.py
 -rw-r--r--  2.0 unx      748 b- defN 20-Feb-02 00:00 matter_persistence/cache/config.py
 -rw-r--r--  2.0 unx      138 b- defN 20-Feb-02 00:00 matter_persistence/cache/exceptions.py
 -rw-r--r--  2.0 unx     1003 b- defN 20-Feb-02 00:00 matter_persistence/database/__init__.py
 -rw-r--r--  2.0 unx      932 b- defN 20-Feb-02 00:00 matter_persistence/database/client.py
--rw-r--r--  2.0 unx     2320 b- defN 20-Feb-02 00:00 matter_persistence/database/config.py
+-rw-r--r--  2.0 unx     2358 b- defN 20-Feb-02 00:00 matter_persistence/database/config.py
 -rw-r--r--  2.0 unx     2446 b- defN 20-Feb-02 00:00 matter_persistence/database/connection.py
 -rw-r--r--  2.0 unx      644 b- defN 20-Feb-02 00:00 matter_persistence/database/exceptions.py
 -rw-r--r--  2.0 unx     4338 b- defN 20-Feb-02 00:00 matter_persistence/database/orm.py
 -rw-r--r--  2.0 unx     1241 b- defN 20-Feb-02 00:00 matter_persistence/database/session.py
 -rw-r--r--  2.0 unx      668 b- defN 20-Feb-02 00:00 matter_persistence/database/utils.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/__init__.py
 -rw-r--r--  2.0 unx     1907 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/command.py
 -rw-r--r--  2.0 unx      216 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/exceptions.py
 -rw-r--r--  2.0 unx     2117 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/utils.py
--rw-r--r--  2.0 unx      570 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/resources/env.py
+-rw-r--r--  2.0 unx      897 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/resources/env.py
 -rw-r--r--  2.0 unx      510 b- defN 20-Feb-02 00:00 matter_persistence/database/migrations/resources/script.py.mako
-?rw-r--r--  2.0 unx     4871 b- defN 20-Feb-02 00:00 matter_persistence-0.5.0.dist-info/METADATA
-?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 matter_persistence-0.5.0.dist-info/WHEEL
-?rw-r--r--  2.0 unx       82 b- defN 20-Feb-02 00:00 matter_persistence-0.5.0.dist-info/entry_points.txt
-?rw-r--r--  2.0 unx     1068 b- defN 20-Feb-02 00:00 matter_persistence-0.5.0.dist-info/licenses/LICENSE
-?rw-r--r--  2.0 unx     2487 b- defN 20-Feb-02 00:00 matter_persistence-0.5.0.dist-info/RECORD
-26 files, 30399 bytes uncompressed, 10772 bytes compressed:  64.6%
+?rw-r--r--  2.0 unx     5761 b- defN 20-Feb-02 00:00 matter_persistence-0.6.0.dist-info/METADATA
+?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 matter_persistence-0.6.0.dist-info/WHEEL
+?rw-r--r--  2.0 unx       82 b- defN 20-Feb-02 00:00 matter_persistence-0.6.0.dist-info/entry_points.txt
+?rw-r--r--  2.0 unx     1068 b- defN 20-Feb-02 00:00 matter_persistence-0.6.0.dist-info/licenses/LICENSE
+?rw-r--r--  2.0 unx     2487 b- defN 20-Feb-02 00:00 matter_persistence-0.6.0.dist-info/RECORD
+26 files, 31654 bytes uncompressed, 11067 bytes compressed:  65.0%
```

## zipnote {}

```diff
@@ -57,23 +57,23 @@
 
 Filename: matter_persistence/database/migrations/resources/env.py
 Comment: 
 
 Filename: matter_persistence/database/migrations/resources/script.py.mako
 Comment: 
 
-Filename: matter_persistence-0.5.0.dist-info/METADATA
+Filename: matter_persistence-0.6.0.dist-info/METADATA
 Comment: 
 
-Filename: matter_persistence-0.5.0.dist-info/WHEEL
+Filename: matter_persistence-0.6.0.dist-info/WHEEL
 Comment: 
 
-Filename: matter_persistence-0.5.0.dist-info/entry_points.txt
+Filename: matter_persistence-0.6.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: matter_persistence-0.5.0.dist-info/licenses/LICENSE
+Filename: matter_persistence-0.6.0.dist-info/licenses/LICENSE
 Comment: 
 
-Filename: matter_persistence-0.5.0.dist-info/RECORD
+Filename: matter_persistence-0.6.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## matter_persistence/__about__.py

```diff
@@ -1,4 +1,4 @@
 # SPDX-FileCopyrightText: 2023-present Rômulo Jales <romulo@thisismatter.com>
 #
 # SPDX-License-Identifier: MIT
-__version__ = "0.5.0"
+__version__ = "0.6.0"
```

## matter_persistence/database/config.py

```diff
@@ -38,14 +38,15 @@
 FILE_NAME_TEMPLATE = "%%(year)d%%(month).2d%%(day).2d-%%(hour).2d%%(minute).2d%%(second).2d-%%(slug)s"
 
 
 class DatabaseMigrationConfig(BaseModel):
     path: str
     models: List[str]
     file_template: str = FILE_NAME_TEMPLATE
+    version_schema: str | None = None
 
 
 class DatabaseConfig:
     def __init__(
         self,
         engine: Optional[str] = None,
         username: Optional[SecretStr] = None,
```

## matter_persistence/database/migrations/resources/env.py

```diff
@@ -1,7 +1,10 @@
+import logging
+
+import sqlalchemy
 from alembic import context
 
 from matter_persistence.database import DatabaseConfig, DatabaseBaseModel
 from matter_persistence.database.migrations.utils import load_DatabaseBaseModel_subclass
 
 config = context.config
 db_config: DatabaseConfig = config.attributes["db_config"]
@@ -10,8 +13,13 @@
     subclass = load_DatabaseBaseModel_subclass(i)
 
 target_metadata = DatabaseBaseModel.metadata
 
 context.configure(connection=config.attributes["connection"], target_metadata=target_metadata)
 
 with context.begin_transaction():
+    if bool(db_config.migration.version_schema):
+        try:
+            context.execute(f"SET search_path TO {db_config.migration.version_schema}")
+        except sqlalchemy.exc.OperationalError:  # pragma: no cover
+            logging.warning("Database does not support schemas changing.")
     context.run_migrations()
```

## Comparing `matter_persistence-0.5.0.dist-info/METADATA` & `matter_persistence-0.6.0.dist-info/METADATA`

 * *Files 16% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: matter-persistence
-Version: 0.5.0
+Version: 0.6.0
 Summary: Matter persistance library.
 Project-URL: Documentation, https://github.com/Matter-Tech/matter-persistence#readme
 Project-URL: Issues, https://github.com/Matter-Tech/matter-persistence/issues
 Project-URL: Source, https://github.com/Matter-Tech/matter-persistence
 Author-email: Rômulo Jales <romulo@thisismatter.com>
 License-Expression: MIT
 License-File: LICENSE
@@ -15,29 +15,29 @@
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: Implementation :: CPython
 Classifier: Programming Language :: Python :: Implementation :: PyPy
 Requires-Python: >=3.10
 Requires-Dist: matter-exceptions~=1.0
 Requires-Dist: pydantic~=1.10
 Provides-Extra: cache
-Requires-Dist: aiocache==0.12.0; extra == 'cache'
+Requires-Dist: aiocache==0.12.1; extra == 'cache'
 Provides-Extra: cache-memcached
-Requires-Dist: aiocache[memcached]==0.12.0; extra == 'cache-memcached'
+Requires-Dist: aiocache[memcached]==0.12.1; extra == 'cache-memcached'
 Requires-Dist: matter-persistence[cache]; extra == 'cache-memcached'
 Provides-Extra: database
-Requires-Dist: sqlalchemy[asyncio]==2.0.7; extra == 'database'
+Requires-Dist: sqlalchemy[asyncio]==2.0.10; extra == 'database'
 Provides-Extra: database-migrations
-Requires-Dist: alembic==1.10.2; extra == 'database-migrations'
+Requires-Dist: alembic==1.10.3; extra == 'database-migrations'
 Requires-Dist: matter-persistence[database]; extra == 'database-migrations'
 Requires-Dist: python-dotenv~=1.0; extra == 'database-migrations'
 Requires-Dist: typer==0.7.0; extra == 'database-migrations'
 Provides-Extra: database-postgresql
 Requires-Dist: asyncpg==0.27.0; extra == 'database-postgresql'
 Requires-Dist: matter-persistence[database]; extra == 'database-postgresql'
-Requires-Dist: sqlalchemy[postgresql]==2.0.7; extra == 'database-postgresql'
+Requires-Dist: sqlalchemy[postgresql]==2.0.10; extra == 'database-postgresql'
 Description-Content-Type: text/markdown
 
 # matter-persistence
 
 [![PyPI - Version](https://img.shields.io/pypi/v/matter-persistence.svg)](https://pypi.org/project/matter-persistence)
 [![PyPI - Python Version](https://img.shields.io/pypi/pyversions/matter-persistence.svg)](https://pypi.org/project/matter-persistence)
 
@@ -112,14 +112,27 @@
     name = Column(String)
 
 async def an_async_function():
     example = ExampleModel(name="test")
     await example.save()
 ```
 
+If you need to define a different schema or namespace for your class you can do:
+
+```python
+from matter_persistence.database import DatabaseBaseModel
+from sqlalchemy import Column, Integer, String
+
+class ExampleModel(DatabaseBaseModel):
+    __tablename__ = "example"
+    __table_args__ = {"schema": "some_schema"}
+    
+    id = Column(Integer, primary_key=True)
+    name = Column(String)
+```
 ### sqlalchemy connection directly
 
 ```python
 from matter_persistence.database import get_or_reuse_connection
 import  sqlalchemy as sa
 
 async def another_sync_function():
@@ -149,13 +162,24 @@
 migrations create --config python.path.to.your.db_config.instance --message <migration name>
 ```
 
 Then apply it, You must provide the full qualified  python path to your configuration instance:
 ```console
 migrations apply --config python.path.to.your.db_config.instance 
 ```
-## Cache
+### Schema support
+
+If you need deal with schemas in your database, you can define one for you versions:
+
+
+```python
+from matter_persistence.database import DatabaseConfig
 
+db_config = DatabaseConfig(connection_uri="sqlite:///test.db",
+                           migration={"path": <a path to your migrations folder>,
+                                      "models": [<a list of full qualified class path of your ORM models>]},
+                                      "version_schema": "another_schema")
+``` 
 
 ### Contributing
 
 for contributions, check the [CONTRIBUTING.md](CONTRIBUTING.md) file
```

## Comparing `matter_persistence-0.5.0.dist-info/licenses/LICENSE` & `matter_persistence-0.6.0.dist-info/licenses/LICENSE`

 * *Files identical despite different names*

## Comparing `matter_persistence-0.5.0.dist-info/RECORD` & `matter_persistence-0.6.0.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,26 +1,26 @@
-matter_persistence/__about__.py,sha256=nVKV2nVYZ6GeSxLZkQPcQVQB3RQ7lMzTJr73gIjw1kI,134
+matter_persistence/__about__.py,sha256=5TDLdrvWXWaFMLvq-aDN7cNecCvFD4lkVf7pxJhM99s,134
 matter_persistence/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_persistence/exceptions.py,sha256=619KHHqroYNuiFeb7Baw_1yZxU8IM5HcKMbFvfzvp94,191
 matter_persistence/cache/__init__.py,sha256=Fxx6JYxthO32V6zGz-0aXBNigOuf9rmVsYVQCjlpFJw,332
 matter_persistence/cache/client.py,sha256=RF63DQvyXvS-UZ9gW2QGL3F_9H_c5h6WXNXlJpNeBuA,1349
 matter_persistence/cache/config.py,sha256=n-jZnTF2WQgBeKbEubGuqhj973WxSMJNiisRL_eS2wo,748
 matter_persistence/cache/exceptions.py,sha256=rjpR3TwBs7S5K8RH2O1jP_rHGxq4Y1nhXSvJW2SrEec,138
 matter_persistence/database/__init__.py,sha256=RDDX9X24xYgFmqY0zcUpzRhIlpZvPB8SHRf1neyp9H4,1003
 matter_persistence/database/client.py,sha256=GpFtpvIpQpHmEhanPkTzjG9m6zbIm02uDr85skDE6Sc,932
-matter_persistence/database/config.py,sha256=EwNw-0UU-YaVJpeF6s-JdIF9CTYz5_2QlC0GojUP8jE,2320
+matter_persistence/database/config.py,sha256=aw5OGW2lhmYJVzzTomTSJCzOZ5AiF0FEKEkfB_3i19c,2358
 matter_persistence/database/connection.py,sha256=4RrJJJBJTmgdMN2VRWLi9TxFoLCzh-C4mwOWLbJvTdk,2446
 matter_persistence/database/exceptions.py,sha256=ZJ4lC77Qw6v05xhj8VEz66jTW68Ehx44sTWDatoC31M,644
 matter_persistence/database/orm.py,sha256=71giNFRuAI8t5n23OX0qi1qKxyv3XeKBduLJKxBEz1U,4338
 matter_persistence/database/session.py,sha256=MokSXLDaJAmC_vgJG_yyxNSyFXxV0dzkLL0KNMKxDDQ,1241
 matter_persistence/database/utils.py,sha256=F92v87eOETc6P-p_lfTXvBBv0lq1_m2QZX18iriJOWs,668
 matter_persistence/database/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 matter_persistence/database/migrations/command.py,sha256=6NW1Zj4wU171TcB6SSOIc5dRer2oAlEQubBTBqUeLkY,1907
 matter_persistence/database/migrations/exceptions.py,sha256=8zb4aOGHJPrIQ1kY3ZCLLgU-9SvT8iWjZ1JUZCbEZ1M,216
 matter_persistence/database/migrations/utils.py,sha256=muI6zq0Y04m33B2W80S6W_MfPZEP5unaiyWPPlAUd7o,2117
-matter_persistence/database/migrations/resources/env.py,sha256=8CwPUmgHpJN__aVwmviiufNZ65oiolVu7SDYIZwXLb8,570
+matter_persistence/database/migrations/resources/env.py,sha256=En9fi6QAPwXBhkA5fz8hV4vx6bISthVgs5wsaw0LiNY,897
 matter_persistence/database/migrations/resources/script.py.mako,sha256=HNlf26BI1xvQKjiUojnj15BPrVUfVVr81IOgliJf83c,510
-matter_persistence-0.5.0.dist-info/METADATA,sha256=p59OpEoYo79eO2cksmZQjs7Qua1JjqMJihgyCM9DCBc,4871
-matter_persistence-0.5.0.dist-info/WHEEL,sha256=EI2JsGydwUL5GP9t6kzZv7G3HDPi7FuZDDf9In6amRM,87
-matter_persistence-0.5.0.dist-info/entry_points.txt,sha256=2ZQRC328nPFzSmFv0ya4FSUFL9ZtpUD265kqZoW7c_A,82
-matter_persistence-0.5.0.dist-info/licenses/LICENSE,sha256=bqRY4B_u4xSKzKFb3ML8l0nCWvMXyzEGwY2B2hteV8g,1068
-matter_persistence-0.5.0.dist-info/RECORD,,
+matter_persistence-0.6.0.dist-info/METADATA,sha256=FFgjX9jFgGtNkh-DCQlQ1UotNwMhdnGv2C6R0hDEhEQ,5761
+matter_persistence-0.6.0.dist-info/WHEEL,sha256=9MIigYJ7D5sOqAPqr0-o6tSMY_nQ7c6kvtvyeUB99YQ,87
+matter_persistence-0.6.0.dist-info/entry_points.txt,sha256=2ZQRC328nPFzSmFv0ya4FSUFL9ZtpUD265kqZoW7c_A,82
+matter_persistence-0.6.0.dist-info/licenses/LICENSE,sha256=bqRY4B_u4xSKzKFb3ML8l0nCWvMXyzEGwY2B2hteV8g,1068
+matter_persistence-0.6.0.dist-info/RECORD,,
```

